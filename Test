terraform-vsphere-modular/ ├── main.tf │
│   module "web" { │     source              = "./modules/web" │     count               = var.web_vm_count │     airport_code        = var.airport_code │     forest_designator   = var.forest_designator │     domain_designator   = var.domain_designator │     environment         = var.environment │     server_function     = "WEB" │     template_name       = var.windows_template │     ipv4_start          = 100 │   } │ │   module "app" { │     source              = "./modules/app" │     count               = var.app_vm_count │     airport_code        = var.airport_code │     forest_designator   = var.forest_designator │     domain_designator   = var.domain_designator │     environment         = var.environment │     server_function     = "APP" │     template_name       = var.linux_template │     ipv4_start          = 120 │   } │ │   module "db" { │     source              = "./modules/db" │     count               = var.db_vm_count │     airport_code        = var.airport_code │     forest_designator   = var.forest_designator │     domain_designator   = var.domain_designator │     environment         = var.environment │     server_function     = "DB" │     template_name       = var.linux_template │     ipv4_start          = 140 │   } │ ├── variables.tf │
│   variable "web_vm_count" {} │   variable "app_vm_count" {} │   variable "db_vm_count" {} │   variable "airport_code" {} │   variable "forest_designator" {} │   variable "domain_designator" {} │   variable "environment" {} │   variable "windows_template" {} │   variable "linux_template" {} │ ├── data.tf │
│   data "vsphere_datacenter" "dc" { │     name = "DataCenter" │   } │ │   data "vsphere_compute_cluster" "cluster" { │     name          = "Cluster" │     datacenter_id = data.vsphere_datacenter.dc.id │   } │ │   data "vsphere_datastore" "datastore" { │     name          = "Datastore" │     datacenter_id = data.vsphere_datacenter.dc.id │   } │ │   data "vsphere_network" "network" { │     name          = "VM Network" │     datacenter_id = data.vsphere_datacenter.dc.id │   } │ │   data "vsphere_virtual_machine" "windows_template" { │     name          = var.windows_template │     datacenter_id = data.vsphere_datacenter.dc.id │   } │ │   data "vsphere_virtual_machine" "linux_template" { │     name          = var.linux_template │     datacenter_id = data.vsphere_datacenter.dc.id │   } │ ├── provider.tf │
│   provider "vsphere" { │     user                 = "vmadmin@dc.com" │     password             = "Password@123" │     vsphere_server       = "vcsa01.dc.com" │     allow_unverified_ssl = true │   } │ └── modules/ ├── web/ │   ├── main.tf │   │   resource "vsphere_virtual_machine" "web_vm" { │   │     count            = var.count │   │     name             = "${var.airport_code}M${var.forest_designator}${var.domain_designator}${var.server_function}${var.environment}${format("%04d", count.index + 1)}" │   │     resource_pool_id = var.resource_pool_id │   │     datastore_id     = var.datastore_id │   │     firmware         = "efi" │   │     num_cpus         = 2 │   │     memory           = 4096 │   │     guest_id         = var.guest_id │   │     network_interface { │   │       network_id   = var.network_id │   │       adapter_type = var.adapter_type │   │     } │   │     disk { │   │       label            = "disk0" │   │       size             = var.disk_size │   │       eagerly_scrub    = false │   │       thin_provisioned = true │   │     } │   │     clone { │   │       template_uuid = var.template_id │   │       customize { │   │         windows_options { │   │           computer_name  = "${var.airport_code}M${var.forest_designator}${var.domain_designator}${var.server_function}${var.environment}${format("%04d", count.index + 1)}" │   │           workgroup      = "example.local" │   │           admin_password = var.admin_password │   │         } │   │         network_interface { │   │           ipv4_address = "192.168.1.${var.ipv4_start + count.index}" │   │           ipv4_netmask = 24 │   │         } │   │         ipv4_gateway = "192.168.1.254" │   │       } │   │     } │   │   } │   └── variables.tf │       variable "count" {} │       variable "airport_code" {} │       variable "forest_designator" {} │       variable "domain_designator" {} │       variable "environment" {} │       variable "server_function" {} │       variable "resource_pool_id" {} │       variable "datastore_id" {} │       variable "guest_id" {} │       variable "network_id" {} │       variable "adapter_type" {} │       variable "disk_size" {} │       variable "template_id" {} │       variable "admin_password" {} │       variable "ipv4_start" {} ├── app/ │   ├── main.tf │   │   # Similar to web/main.tf but using linux_options │   └── variables.tf │       # Same variable declarations └── db/ ├── main.tf │   # Similar to app/main.tf └── variables.tf # Same variable declarations

